<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV Policy Dashboard - Varun Chati</title>
    
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #e74c3c;
            --accent-color: #3498db;
            --math-color: #8e44ad;
            --art-color: #e67e22;
            --text-color: #2c3e50;
            --light-bg: #f8f9fa;
            --card-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.7;
            color: var(--text-color);
            background: var(--light-bg);
        }

        .dashboard-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6rem 0 4rem 0;
            text-align: center;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 0;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin: 1rem 0 2rem 0;
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s ease;
        }

        .back-link:hover {
            opacity: 0.8;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .chart-container {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .chart-container h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--light-bg);
            padding-bottom: 0.5rem;
        }

        .controls-panel {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            margin-bottom: 2rem;
        }

        .controls-panel h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .control-group {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        select, button {
            padding: 0.7rem 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
        }

        select {
            background: white;
            min-width: 200px;
        }

        button {
            background: var(--math-color);
            color: white;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease;
            font-weight: 500;
        }

        button:hover {
            background: #7d3c98;
        }

        .insights-panel {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            margin-top: 2rem;
            border-left: 4px solid var(--math-color);
        }

        .insights-panel h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .insight-item {
            background: var(--light-bg);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 3px solid var(--accent-color);
        }

        @media (max-width: 768px) {
            .chart-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                padding: 1rem;
            }
            
            .control-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            select {
                min-width: auto;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <section class="dashboard-hero">
        <div class="container">
            <h1>EV Policy Impact Dashboard</h1>
            <p>Interactive visualization of findings from "Fast Subsidies, Furious Emissions"</p>
            <a href="index.html" class="back-link">
                <i class="fas fa-arrow-left"></i> Back to Portfolio
            </a>
        </div>
    </section>

    <section class="container">
        <div class="controls-panel">
            <h3>Policy Scenario Controls</h3>
            <div class="control-group">
                <div>
                    <label for="stateSelect">State:</label>
                    <select id="stateSelect">
                        <option value="all">All States</option>
                        <option value="maharashtra">Maharashtra</option>
                        <option value="gujarat">Gujarat</option>
                        <option value="karnataka">Karnataka</option>
                        <option value="tamil_nadu">Tamil Nadu</option>
                    </select>
                </div>
                <div>
                    <label for="timeSelect">Time Period:</label>
                    <select id="timeSelect">
                        <option value="2015-2022">2015-2022</option>
                        <option value="pre_fame">Pre-FAME (2010-2014)</option>
                        <option value="post_fame">Post-FAME (2015-2022)</option>
                    </select>
                </div>
                <button onclick="updateAllCharts()">Update Analysis</button>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-container">
                <h3>EV Sales vs Electricity Generation</h3>
                <canvas id="evElectricityChart"></canvas>
            </div>
            
            <div class="chart-container">
                <h3>Pollution Trends Post-FAME Policy</h3>
                <canvas id="pollutionChart"></canvas>
            </div>
            
            <div class="chart-container">
                <h3>State-wise EV Adoption</h3>
                <canvas id="stateEvChart"></canvas>
            </div>
            
            <div class="chart-container">
                <h3>Subsidy Optimization Trade-offs</h3>
                <canvas id="subsidyChart"></canvas>
            </div>
        </div>

        <div class="insights-panel">
            <h3>Key Research Insights</h3>
            <div class="insight-item">
                <strong>Policy Trade-off Identified:</strong> EV subsidies alone increase grid emissions by 15-25% without complementary renewable energy investments.
            </div>
            <div class="insight-item">
                <strong>Optimal Strategy:</strong> Coordinated EV + solar microgrid subsidies reduce net emissions by 30% compared to EV-only policies.
            </div>
            <div class="insight-item">
                <strong>State Variation:</strong> High-grid-carbon states show weaker environmental benefits from EV adoption without grid decarbonization.
            </div>
        </div>
    </section>

    <script>
        // Sample data based on your paper's findings
        const evData = {
            years: [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022],
            evSales: [12000, 18500, 25600, 34800, 45600, 38900, 52300, 67800],
            electricityGen: [1250, 1320, 1450, 1580, 1680, 1620, 1780, 1950],
            so2Levels: [14.2, 13.8, 13.1, 12.4, 11.8, 11.2, 10.7, 10.1],
            states: {
                maharashtra: [2500, 4200, 5800, 7200, 8900, 7600, 10200, 12500],
                gujarat: [1800, 2900, 4100, 5200, 6300, 5400, 7200, 8800],
                karnataka: [2200, 3500, 4800, 6100, 7400, 6200, 8300, 9800],
                tamil_nadu: [1900, 3100, 4300, 5500, 6700, 5800, 7700, 9200]
            }
        };

        // Chart instances
        let evElectricityChart, pollutionChart, stateEvChart, subsidyChart;

        function initCharts() {
            // Chart 1: EV Sales vs Electricity Generation
            const ctx1 = document.getElementById('evElectricityChart').getContext('2d');
            evElectricityChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: evData.years,
                    datasets: [
                        {
                            label: 'EV Sales',
                            data: evData.evSales,
                            borderColor: '#8e44ad',
                            backgroundColor: 'rgba(142, 68, 173, 0.1)',
                            yAxisID: 'y',
                            tension: 0.4,
                            borderWidth: 3
                        },
                        {
                            label: 'Electricity Generation (MU)',
                            data: evData.electricityGen,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            yAxisID: 'y1',
                            tension: 0.4,
                            borderWidth: 3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'EV Sales'
                            },
                            grid: {
                                drawOnChartArea: true,
                            },
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Electricity Generation (MU)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        },
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });

            // Chart 2: Pollution Trends
            const ctx2 = document.getElementById('pollutionChart').getContext('2d');
            pollutionChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: evData.years,
                    datasets: [{
                        label: 'SO₂ Concentration (μg/m³)',
                        data: evData.so2Levels,
                        backgroundColor: 'rgba(52, 152, 219, 0.7)',
                        borderColor: '#3498db',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'SO₂ Concentration (μg/m³)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });

            // Chart 3: State-wise EV Adoption
            const ctx3 = document.getElementById('stateEvChart').getContext('2d');
            stateEvChart = new Chart(ctx3, {
                type: 'bar',
                data: {
                    labels: evData.years,
                    datasets: [
                        {
                            label: 'Maharashtra',
                            data: evData.states.maharashtra,
                            backgroundColor: 'rgba(142, 68, 173, 0.7)'
                        },
                        {
                            label: 'Gujarat',
                            data: evData.states.gujarat,
                            backgroundColor: 'rgba(52, 152, 219, 0.7)'
                        },
                        {
                            label: 'Karnataka',
                            data: evData.states.karnataka,
                            backgroundColor: 'rgba(46, 204, 113, 0.7)'
                        },
                        {
                            label: 'Tamil Nadu',
                            data: evData.states.tamil_nadu,
                            backgroundColor: 'rgba(241, 196, 15, 0.7)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            stacked: false,
                        },
                        y: {
                            stacked: false,
                            title: {
                                display: true,
                                text: 'EV Sales'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });

            // Chart 4: Subsidy Optimization
            const ctx4 = document.getElementById('subsidyChart').getContext('2d');
            subsidyChart = new Chart(ctx4, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'EV Subsidy Only',
                        data: [
                            {x: 10, y: 15}, {x: 20, y: 13}, {x: 30, y: 11}, 
                            {x: 40, y: 10}, {x: 50, y: 9.5}, {x: 60, y: 9.2}
                        ],
                        backgroundColor: 'rgba(231, 76, 60, 0.7)',
                        showLine: true,
                        tension: 0.4
                    }, {
                        label: 'EV + Solar Subsidies',
                        data: [
                            {x: 10, y: 14}, {x: 20, y: 11}, {x: 30, y: 8}, 
                            {x: 40, y: 6}, {x: 50, y: 4.5}, {x: 60, y: 3.2}
                        ],
                        backgroundColor: 'rgba(46, 204, 113, 0.7)',
                        showLine: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'Subsidy Amount (Million USD)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'SO₂ Emissions (μg/m³)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.parsed.y} μg/m³ at $${context.parsed.x}M`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateAllCharts() {
            const selectedState = document.getElementById('stateSelect').value;
            const timePeriod = document.getElementById('timeSelect').value;
            
            // Show loading state
            const button = document.querySelector('button');
            const originalText = button.textContent;
            button.textContent = 'Updating...';
            button.disabled = true;
            
            // Simulate data filtering (in real implementation, this would filter actual data)
            setTimeout(() => {
                // Reset button
                button.textContent = originalText;
                button.disabled = false;
                
                // Show update message
                alert(`Charts updated for: ${selectedState === 'all' ? 'All States' : selectedState}, ${timePeriod} period\n\nThis demonstrates interactive filtering capability. In a full implementation, this would update all chart data.`);
            }, 1000);
        }

        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            
            // Ensure proper navigation back to main site
            if (window.location.pathname.includes('ev-dashboard.html') && !document.referrer.includes('github.io')) {
                document.querySelector('.back-link').href = 'index.html';
            }
        });
    </script>
</body>
</html>
